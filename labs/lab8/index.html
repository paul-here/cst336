<!DOCTYPE html>
<html>

<head>
    <title> Pixabay API Demo </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
        body {
            text-align: center;
        }

        img {
            border-radius: 20px;
            padding: 15px;
        }
        .favorite {
            cursor: pointer;
        }
    </style>
    <script>
        /* global $ */

        function searchImage() {

            $.ajax({
                method: "GET",
                url: "api/pixabayProxy.php",
                dataType: "json",
                data: { "q": $("#keyword").val() },
                success: function(data, status) {

                    let htmlString = "";
                    let i = 0;
                    for (let rows = 0; rows < 3; rows++) {

                        htmlString += "<div class='row'>";

                        for (let cols = 0; cols < 3; cols++) {

                            htmlString += "<img src='img/favorite.png' class='favorite' width='30'>";
                            htmlString += "<img src='" + data[i++] + "' width='300' height='280' >";

                        } //for

                        htmlString += "</div>";

                    } //for


                    $("#images").append(htmlString);
                }
            }); // ajax 

        } // searchImage()

        $(document).ready(function() {
            
            let toggle = false;

            $("#images").on("click", ".favorite", function() {
                toggle = !toggle;
                if(toggle){
                    $(this).css('background-image', 'url(' + ur + ')');    
                    
                } else {
                    $(".favorite").css("background-image", "none");    
                }
                
                // background-image: url("paper.gif");
            });
        });
    </script>
</head>

<body>

    <h1> Pixabay Image Search </h1>
    Keyword: <input type="text" id="keyword" />
    <button onclick="searchImage()"> Search </button>
    <br /><br />

    <div id="images"></div>

</body>

</html>
